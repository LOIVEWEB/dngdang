try{document.domain="dangdang.com"}catch(err){}document.write('<link href="http://static.dangdang.com/css/win_login20150728.css?20150817" rel="stylesheet" type="text/css" />');var ifremHTML="<iframe id=MsgBoxFrame name=MsgBoxFrame  src='' scrolling=no  frameborder=0 scrolling=no allowtransparency=true style='width: 320px; height: 269px;'></iframe>";var login_checkscript_domin="login.dangdang.com";var show_vcode_domin="login.dangdang.com";var public_objid="";var public_posturl="";var regmobile_interobj;var DDLoginGlobalVar={email:"",request_from:2};var ddlogin={returnShopDuration:10,returnShopTime:0,regSucctimeoutrun:0,regMoblieCodetimeoutrun:0,lang_zh:{"1001":"\u767b\u5f55","1002":"\u8bf7\u60a8\u6253\u5f00\u6d4f\u89c8\u5668\u7684Cookie\u529f\u80fd\uff01","1101":"\u8bf7\u8f93\u5165\u90ae\u7bb1\u002f\u6635\u79f0\u002f\u624b\u673a\u53f7\u7801","1102":"\u7528\u6237\u540d\u6216\u5bc6\u7801\u8f93\u5165\u9519\u8bef\uff0c\u8bf7\u6838\u5bf9\u540e\u91cd\u65b0\u8f93\u5165\u3002","1103":'\u8be5\u7528\u6237\u540d\u4e0d\u5b58\u5728,<a href="javascript:ddlogin.showregister(1);">\u514d\u8d39\u6ce8\u518c</a>',"1104":"\u7528\u6237\u5c1a\u672a\u9a8c\u8bc1\uff0c\u8bf7\u9a8c\u8bc1\u540e\u767b\u5f55\uff01","1201":"\u8bf7\u586b\u5199\u957f\u5ea6\u4e3a\u0036\u002d\u0032\u0030\u4e2a\u5b57\u7b26\u7684\u5bc6\u7801","1202":"\u5bc6\u7801\u4e3a\u7a7a","1203":"\u8bf7\u8f93\u5165\u60a8\u7684\u767b\u5f55\u5bc6\u7801","1301":"\u8bf7\u586b\u5199\u56fe\u7247\u4e2d\u7684\u5b57\u7b26\uff0c\u4e0d\u533a\u5206\u5927\u5c0f\u5199","1302":"\u8bf7\u8f93\u5165\u56fe\u5f62\u9a8c\u8bc1\u7801","1303":"\u9a8c\u8bc1\u7801\u8f93\u5165\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u586b\u5199","1304":"\u4e3a\u4e86\u4f60\u7684\u8d26\u6237\u5b89\u5168\uff0c\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801","2101":"\u90ae\u7bb1\u002f\u624b\u673a\u53f7\u53ef\u7528\u4e8e\u767b\u5f55\u3001\u627e\u56de\u5bc6\u7801\u3001\u63a5\u6536\u8ba2\u5355\u901a\u77e5\u7b49\u670d\u52a1","2102":"\u90ae\u7bb1\u002f\u624b\u673a\u53f7\u7801\u4e0d\u80fd\u4e3a\u7a7a","2103":"\u90ae\u7bb1\u002f\u624b\u673a\u683c\u5f0f\u4e0d\u6b63\u786e\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165","2104":"\u8be5\u90ae\u7bb1\u5df2\u88ab\u6ce8\u518c\uff0c\u8bf7\u66f4\u6362\u5176\u5b83\u90ae\u7bb1\uff0c\u6216\u4f7f\u7528\u8be5\u0026\u006e\u0062\u0073\u0070\u003b<a href=\"javascript:ddlogin.showlogin('{#Email#}');\">\u90ae\u7bb1\u767b\u5f55</a>","2105":"\u6b64\u624b\u673a\u53f7\u5df2\u6ce8\u518c\uff0c\u8bf7\u66f4\u6362\u5176\u5b83\u624b\u673a\u53f7\uff0c\u6216\u4f7f\u7528\u8be5\u0026\u006e\u0062\u0073\u0070\u003b<a href=\"javascript:ddlogin.showlogin('{#phone#}');\">\u624b\u673a\u53f7\u767b\u5f55</a>","2111":"\u5bc6\u7801\u4e3a\u0036\u002d\u0032\u0030\u4e2a\u5b57\u7b26\uff0c\u53ef\u7531\u82f1\u6587\u3001\u6570\u5b57\u53ca\u7b26\u53f7\u7ec4\u6210","2112":"\u767b\u5f55\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a","2113":"\u5bc6\u7801\u957f\u5ea6\u0036\u002d\u0032\u0030\u4e2a\u5b57\u7b26\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165","2115":"\u5bc6\u7801\u4e0d\u80fd\u5305\u542b\u201c\u7a7a\u683c\u201d\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165","2116":"\u5bc6\u7801\u4e3a\u0036\u002d\u0032\u0030\u4f4d\u5b57\u7b26\u002c\u53ea\u80fd\u7531\u82f1\u6587\u3001\u6570\u5b57\u53ca\u7b26\u53f7\u7ec4\u6210","2121":"\u8bf7\u518d\u6b21\u8f93\u5165\u5bc6\u7801","2122":"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a","2123":"\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165","2131":"\u8bf7\u8f93\u5165\u4f60\u8981\u9a8c\u8bc1\u7684\u624b\u673a\u53f7\u7801","2132":"\u9a8c\u8bc1\u624b\u673a\u53f7\u4e0d\u80fd\u4e3a\u7a7a","2133":"\u624b\u673a\u53f7\u7801\u683c\u5f0f\u6709\u8bef\uff0c\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801","2141":"\u8bf7\u8f93\u5165\u77ed\u4fe1\u9a8c\u8bc1\u7801","2142":"\u9a8c\u8bc1\u7801\u5df2\u53d1\u9001\uff0c\u8bf7\u6ce8\u610f\u67e5\u6536","2143":"\u60a8\u7684\u624b\u673a\u53f7\u7801\u83b7\u53d6\u9a8c\u8bc1\u7801\u8fc7\u4e8e\u9891\u7e41\uff0c\u8bf7\u4e8e\u0032\u0034\u5c0f\u65f6\u540e\u91cd\u8bd5","2144":"\u8fd8\u662f\u6ca1\u6709\u6536\u5230\u77ed\u4fe1\uff1f\u8bf7\u4e8e\u0032\u0034\u5c0f\u65f6\u540e\u91cd\u8bd5\uff0c\u6216\u66f4\u6362\u9a8c\u8bc1\u624b\u673a\u53f7\u7801","2145":"\u7f51\u7edc\u7e41\u5fd9\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5","2146":"\u91cd\u65b0\u83b7\u53d6\u9a8c\u8bc1\u7801","2147":"\u5b8c\u6210\u9a8c\u8bc1\u540e\uff0c\u60a8\u53ef\u4ee5\u7528\u8be5\u624b\u673a\u767b\u5f55\u548c\u627e\u56de\u5bc6\u7801","2148":"\u9a8c\u8bc1\u7801\u9519\u8bef","2149":"\u60a8\u7684\u624b\u673a\u53f7\u7801\u83b7\u53d6\u9a8c\u8bc1\u7801\u8fc7\u4e8e\u9891\u7e41\uff0c\u8bf7\u0032\u5206\u949f\u540e\u91cd\u8bd5","2151":"\u60a8\u5fc5\u987b\u540c\u610f\u5f53\u5f53\u670d\u52a1\u6761\u6b3e\u540e\uff0c\u624d\u80fd\u63d0\u4ea4\u6ce8\u518c\u3002","2161":"\u8bf7\u586b\u5199\u56fe\u7247\u4e2d\u7684\u5b57\u7b26\uff0c\u4e0d\u533a\u5206\u5927\u5c0f\u5199","2162":"\u8bf7\u8f93\u5165\u56fe\u5f62\u9a8c\u8bc1\u7801","2163":"\u56fe\u5f62\u9a8c\u8bc1\u7801\u8f93\u5165\u9519\u8bef\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165","2164":"\u56fe\u5f62\u9a8c\u8bc1\u7801\u5df2\u5931\u6548\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165","2171":"\u7f51\u7edc\u7e41\u5fd9\uff0c\u6ce8\u518c\u5931\u8d25,\u8bf7\u7a0d\u540e\u518d\u8bd5","2172":'\u4e3a\u4e86\u4f60\u7684\u8d26\u6237\u5b89\u5168,\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801");'},reg:{"emailNameReg":/^(([a-zA-Z0-9]+\w*((\.\w+)|(-\w+))*[\.-]?[a-zA-Z0-9]+)|([a-zA-Z0-9]))$/,"emailReg":/^(([a-zA-Z0-9]+\w*((\.\w+)|(-\w+))*[\.-]?[a-zA-Z0-9]+)|([a-zA-Z0-9]))\@[a-zA-Z0-9]+((\.|-)[a-zA-Z0-9]+)*\.[a-zA-Z0-9]+$/,"mobileReg":/^1[3,4,5,7,8][0-9]{9}$/,"vcodeReg":/^[a-zA-Z0-9]*$/,"verifyCodeReg":/(\W{2}|\W{4}|\w{2}|\w{4})/},login_su_key:"",openchangepass:0,login_win:null,login_win_back:null,login_win_back_backcollor:"#FFF",login_win_back_alpha:10,login_vcode_url:"http://"+login_checkscript_domin+"/p/tmp_proxy.php",login_reg_vcode_url:"http://"+login_checkscript_domin+"/p/tmp_proxy.php",login_show_vcode:false,check_email_url:"http://"+login_checkscript_domin+"/p/email_checker.php",check_mobile_url:"http://"+login_checkscript_domin+"/p/mobile_checker.php",check_reg_vcode_url:"http://"+login_checkscript_domin+"/p/vcode_check_new.php",login_register_user_url:"http://"+login_checkscript_domin+"/p/register_user_ajax20150728.php",mobileregister_getvcode_url:"http://"+login_checkscript_domin+"/p/send_mobile_vcode.php",mobileregister_getvcode_url_new:"http://"+login_checkscript_domin+"/p/send_mobile_vcode_new.php",login_inintData_url:"http://"+login_checkscript_domin+"/CheckLogin.php",check_mobilecode_url:"http://"+login_checkscript_domin+"/p/check_mobilephone_vcode_window.php",login_cheat_proof:"http://"+login_checkscript_domin+"/p/mix_cheat_proof.php?source=windowLoginTop",register_cheat_proof:"http://"+login_checkscript_domin+"/p/mix_cheat_proof.php?source=windwRegisterTop",login_get_login_core:"http://"+login_checkscript_domin+"/login_core.php?",auth_human_id:"",windowbackhtml:'<div style="width: 100%; left: 0px; top: 0px; z-index: 99999; display: block; position: absolute; background-color:#000;filter:alpha(opacity = 0);opacity:0;zoom:1; " id="login_background"></div>',window_login_div_html:'<div  id="LoginWindow" style="position: absolute; z-index: 100000; margin-left: auto; top: 0; left: 0;display:none "></div>',windowloginhtml:'<div class="public_login_pop"><div class="head"><ul><li class="on">\u767b\u5f55</li><li><a id="window_tab_register">\u6ce8\u518c</a></li></ul><div class="close" id="LoginWindowclose" title="\u5173\u95ed"></div></div><div class="body"><div id="J_loginCheatProof" class="new_tip" style="display:none;"></div><div id="J_loginDiv"></div></div></div>',windowregisterhtml:'<div class="public_login_pop"><div class="head"><ul><li><a id="window_tab_login">\u767b\u5f55</a></li><li class="on">\u6ce8\u518c</li></ul><div class="close" id="LoginWindowclosereg" title="\u5173\u95ed"></div></div><div class="body" id="main_wind"><div id="J_registerCheatProof" class="new_tip" style="display:none;"></div><dl><dt>\u90ae\u7bb1\u002f\u624b\u673a\u53f7\u7801\uff1a</dt><dd id="username_box"><input class="text" name="txtEmail" id="txtEmail" MaxLength="40" type="text" autocomplete="off" placeholder="\u8bf7\u8f93\u5165\u60a8\u7684\u90ae\u7bb1\u6216\u624b\u673a\u53f7\u7801" errordata="0" tabindex="1011"/><span class="icon_yes" id="chk_emailok"></span><span class="overview" id="Emailerrormassage"></span></dd><dt>\u767b\u5f55\u5bc6\u7801\uff1a</dt><dd id="password_box"><input class="text" name="txtRegPass" id="txtRegPass" type="password" onpaste="return false" ondrop="return ddlogin.regInput(event.dataTransfer.getData(\'Text\'))" errordata="0" tabindex="1012"/><span class="icon_yes" id="chk_passwordok"></span><span class="overview" id="passerrormassage"></span><div class="capslock_box" id="J_tipUpperCaseBox" style="display:none;">\u952e\u76d8\u5927\u5199\u9501\u5b9a\u5df2\u6253\u5f00\uff0c\u8bf7\u6ce8\u610f\u5927\u5c0f\u5199\u0021</div><span id="spnPwdStrongTips"><span id="spnPwdStrong1" class="overview j_pwdStrong" style="display: none;"><span class="msg_level"><span class="s1"></span><span></span><span></span></span>\u5bc6\u7801\u8fc7\u4e8e\u7b80\u5355</span><span id="spnPwdStrong2" class="overview j_pwdStrong" style="display: none;"><span class="msg_level"><span class="s1"></span><span class="s2"></span><span></span></span>\u8bd5\u8bd5\u5b57\u6bcd\u3001\u7b26\u53f7\u3001\u6570\u5b57\u7684\u7ec4\u5408\u66f4\u5b89\u5168</span><span id="spnPwdStrong3" class="overview j_pwdStrong" style="display: none;"><span class="msg_level"><span class="s1"></span><span class="s2"></span><span class="s3"></span></span>\u5bc6\u7801\u8bbe\u7f6e\u5b89\u5168\uff0c\u653e\u5fc3\u4f7f\u7528</span></span></dd><dt>\u786e\u8ba4\u5bc6\u7801\uff1a</dt><dd id="repassword_box"><input class="text" name="txtRepeatPass" id="txtRepeatPass" type="password" onpaste="return false" ondrop="return ddlogin.regInput(event.dataTransfer.getData(\'Text\'))"errordata="0" tabindex="1013"/><span class="icon_yes" id="chk_repassok"></span><span class="overview" id="repasserrormassage"></span></dd></dl><dl id="J_mobileV" style="display:none"><dt>\u624b\u673a\u9a8c\u8bc1\uff1a</dt><dd><input class="text" name="mobile" id="txt_mobile" type="text" placeholder="\u8bf7\u8f93\u5165\u4f60\u8981\u9a8c\u8bc1\u7684\u624b\u673a\u53f7\u7801" autocomplete="off" MaxLength="11" errordata="0" tabindex="1014"/><span class="icon_yes" id="chk_mobileok"></span><span class="overview" id="mobileerrormassage"></span></dd></dl><dl class="j-vcode"><dt>\u9a8c\u8bc1\u7801\uff1a</dt><dd><input class="text" id="txtVerifyCode" name="txtVerifyCode" type="text"  autocomplete="off" MaxLength="4" style="width:106px;" placeholder="\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801" tabindex="1015" errordata="0"/><a class="code_pic" id="vcodeImgWrap" href="javascript:void(0);"><img id="imgVcode" title="\u9a8c\u8bc1\u7801"></a><a class="code_picww" id="vcodeImgBtn" href="javascript:void(0);" tabindex="1016">\u6362\u5f20\u56fe</a><span class="icon_yes pin_i" id="chk_vcodeok"></span><span class="overview" id="vcodeerrormassage"></span></dd></dl><dl class="j-phoneVcode" style="display: none"><dt>\u77ed\u4fe1\u9a8c\u8bc1\u7801\uff1a</dt><dd><input class="text" id="J_MobileCode" name="txt_pop_sms_vcode" type="text"   autocomplete="off" MaxLength="6" style="width:106px;"                       placeholder="\u8bf7\u586b\u5199\u77ed\u4fe1\u9a8c\u8bc1\u7801"   errordata="0" tabindex="1015"/><a class="get_pin get_pinUnClick" id="J_countDownTip" href="javascript:void(0);" style="display: none;" tabindex="1016">\u0032\u5206\u949f\u540e\u91cd\u65b0\u83b7\u53d6</a><a class="get_pin" id="sendMobileCode" href="javascript:void(0);" tabindex="1016">\u83b7\u53d6\u77ed\u4fe1\u9a8c\u8bc1\u7801</a><span class="icon_yes" id="chk_mobilecodeok"></span><span class="overview" id="mobilecodeerrormassage"></span></dd></dl><div class="button_box"><div><label><input class="checkbox" id="chb_agreement" name="chb_agreement"  type="checkbox" checked="checked" onmouseover="this.style.cursor=\'pointer\';this.style.cursor=\'hand\';" tabindex="1017"/>\u6211\u5df2\u9605\u8bfb\u5e76\u540c\u610f<a href="http://help.dangdang.com/details/page12" target="_blank" tabindex="1018">\u300a\u5f53\u5f53\u4ea4\u6613\u6761\u6b3e\u300b</a>\u548c<a href="http://help.dangdang.com/details/page42" target="_blank" tabindex="1019">\u300a\u5f53\u5f53\u793e\u533a\u6761\u6b3e\u300b</a></label><span class="wrong" id="J_tipAgreement" style="display: block;height:20px;"></span></div><a class="btn_login_g" id="submit_register" tabindex="1020" href="javascript:;" style="margin-top:0;">\u6ce8\u518c</a><a class="btn_login_g" id="J_submitRegisterUnclick" tabindex="1020" href="javascript:;" style="display: none;margin-top:0;">\u6ce8\u518c\u4e2d\u002e\u002e\u002e</a></div></div></div>',windowregisteremailsuccesshtml:'<div class="success_box"><p><span class="icon_yes_b"></span><span class="f16">\u606d\u559c\u60a8\uff0c\u6ce8\u518c\u6210\u529f\uff01</span></p><table cellspacing="0" cellpadding="0" border="0" class="success_table"><tbody><tr id="emailWrap" style="display:none;"><th scope="row">\u90ae&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\u7bb1</th><td>{#Email#}</td></tr><tr><th scope="row">\u624b\u673a\u53f7\u7801</th><td>{#Phone#}</td></tr></tbody></table><div class="button_box"><a class="btn_login_g" id="register_succes" href="javascript:;">\u7acb\u5373\u8d2d\u7269</a></div><p><span id="J_returnShopTip" style="color:#ff5400;">10</span>&nbsp;\u79d2\u540e\u81ea\u52a8\u8fd4\u56de\u002e\u002e\u002e</p></div>',loginCheatProof:'\u8d34\u5fc3\u63d0\u793a\uff1a\u7531\u4e8e\u8fd1\u671f\u7f51\u7edc\u90ae\u7bb1\u4fe1\u606f\u6cc4\u9732\u4e8b\u4ef6\u9891\u53d1\uff0c\u5efa\u8bae\u60a8\u52ff\u8bbe\u7f6e\u4e0e\u90ae\u7bb1\u5bc6\u7801\u76f8\u540c\u7684\u767b\u5f55\u548c\u652f\u4ed8\u5bc6\u7801\uff0c<a href="http://blog.dangdang.com/?p=22276">\u8c28\u9632\u8bc8\u9a97</a>\uff01',registerCheatProof:'\u8d34\u5fc3\u63d0\u793a\uff1a\u8bf7\u52ff\u8bbe\u7f6e\u4e0e\u90ae\u7bb1\u5bc6\u7801\u76f8\u540c\u7684\u8d26\u6237\u767b\u5f55\u5bc6\u7801\u6216\u652f\u4ed8\u5bc6\u7801\uff0c\u9632\u6b62\u4e0d\u6cd5\u5206\u5b50\u7a83\u53d6\u60a8\u7684\u5f53\u5f53\u8d26\u6237\u4fe1\u606f\uff0c<a href="http://blog.dangdang.com/?p=22276">\u8c28\u9632\u8bc8\u9a97</a>\uff01',init:function(a){this.check_jquery(a)},getIEVersion:function(){var a=-1;if(navigator.userAgent.indexOf("MSIE 10.0")!=-1){return 10}else{if(navigator.userAgent.indexOf("MSIE 9.0")!=-1){return 9}else{if(navigator.userAgent.indexOf("MSIE 8.0")!=-1){return 8}else{if(navigator.userAgent.indexOf("MSIE 7.0")!=-1){return 7}else{if(navigator.userAgent.indexOf("MSIE 6.0")!=-1){return 6}}}}}return a},create_Jquert:function(f,h,c){var e=document.getElementById(c);if(e!=null&&document.all&&this.getIEVersion()!=9&&this.getIEVersion()!=10){e.src=f;return}var g=document.documentElement.firstChild;var d=document.createElement("script");d.id=c;d.type="text/javascript";d.src=f;if(e!=null){g.replaceChild(d,e)}else{g.appendChild(d)}var a=new callbackobj();a.callbackfunction=h;var b=false;d.onload=d.onreadystatechange=function(){if(!b&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){a.callbackfunction();d.onload=d.onreadystatechange=null}}},check_jquery:function(a){if(typeof jQuery=="undefined"){this.create_Jquert("http://login.dangdang.com/script/jquery-1.4.2.min.js",function(){ddlogin.start(a)},"jquery_script");return}else{if(jQuery.fn.jquery.substr(0,1)<1||jQuery.fn.jquery.substr(2,1)<4){this.create_Jquert("http://login.dangdang.com/script/jquery-1.4.2.min.js",function(){ddlogin.start(a)},"jquery_script")}else{this.start(a)}}},load_jquery:function(a){if(typeof jQuery=="undefined"){this.create_Jquert("http://login.dangdang.com/script/jquery-1.4.2.min.js",a,"jquery_script");return}else{if(jQuery.fn.jquery.substr(0,1)<1||jQuery.fn.jquery.substr(2,1)<4){this.create_Jquert("http://login.dangdang.com/script/jquery-1.4.2.min.js",a,"jquery_script")}else{a()}}},start:function(a){jQuery(document.body).append(this.windowbackhtml+this.window_login_div_html);if(jQuery.browser.msie){jQuery("#login_background").css({background:ddlogin.login_win_back_backcollor,filter:"alpha(opacity="+ddlogin.login_win_back_alpha+")"})}else{jQuery("#login_background").css({background:ddlogin.login_win_back_backcollor,opacity:ddlogin.login_win_back_alpha/100})}jQuery("#login_background").height(jQuery(document.body).height());this.action.showwindow();Create_jQuery_extend();if(jQuery.browser.version<7){document.execCommand("BackgroundImageCache",false,true)}this.showlogin();this.bindfunc()},bindfunc:function(){this.login_win=jQuery("#LoginWindow");this.login_win_back=jQuery("#login_background");jQuery(window).resize(function(){if(ddlogin.login_win.is(":visible")){ddlogin.login_win.offset({top:parseInt((jQuery(window).height()-ddlogin.login_win.height())/2)+jQuery(document).scrollTop(),left:parseInt((jQuery(window).width()-ddlogin.login_win.width())/2)})}});jQuery("#LoginWindow").show()},showlogin:function(a){this.login_win=jQuery("#LoginWindow");this.login_win_back=jQuery("#login_background");this.login_win.html(this.windowloginhtml);var b=parseInt((jQuery(window).height()-ddlogin.login_win.height())/2)+jQuery(document).scrollTop();var c=parseInt((jQuery(window).width()-ddlogin.login_win.width())/2);this.login_win.css({top:b-170,left:c}).show();DDLoginGlobalVar.email=a?a:"";ddlogin.login.getLoginPan((a?a:""),public_objid,public_posturl,ddlogin.openchangepass);ddlogin.login.getCheatProof();jQuery("#window_tab_register").click(function(){ddlogin.showregister()});jQuery("#LoginWindowclose").click(function(){ddlogin.action.closeloginwin()})},login:{getLoginPan:function(e,c,b,a){var d=ddlogin.login_get_login_core+"request_from=2"+"&email="+e+"&t="+new Date().getTime()+"&jsoncallback=?";jQuery.getScript(d)},getCheatProof:function(){jQuery.ajax({url:ddlogin.login_cheat_proof,cache:true,jsonp:"jsoncallback",dataType:"jsonp",success:function(b){var a=b.returnval;if(a){$cheatProofDiv=jQuery("#J_loginCheatProof");if(a.cheatProof_display==="block"&&a.cheatProof){$cheatProofDiv.css({"display":"block"});if(a.cheatProof.errorCode==="0"){$cheatProofDiv.html(a.cheatProof.res)}else{$cheatProofDiv.html(ddlogin.loginCheatProof)}}return true}else{return false}}})}},regInput:function(b){var a=/^[\w-]*$/;return a.test(b)},showregister:function(b){ddlogin.register.initGloabParam();if(b){var e=jQuery("#txtUsername").val()}jQuery("#LoginWindow").html(this.windowregisterhtml);ddlogin.register.getCheatProof();jQuery("#window_tab_login").click(function(){ddlogin.showlogin()});jQuery("#LoginWindowclosereg").click(function(){ddlogin.action.closeloginwin()});ddlogin.action.regShowVcodeFun("imgVcode");setTimeout(function(){jQuery("#txtEmail").focus();if(e!=""&&e){jQuery("#txtEmail").val(e);jQuery("#txtEmail").textposition(e.length)}},10);var a=jQuery("#txtEmail");a.bind("focus",function(){ddlogin.register.userNameReg.checkUsernameRegFocus()});a.blur(function(){ddlogin.register.userNameReg.checkUsernameReg()});var g=jQuery("#txtRegPass");g.bind("focus",function(){ddlogin.register.passwordReg.checkPasswordRegFocus()});g.keyup(function(){ddlogin.register.passwordReg.checkPasswordRegInput()});g.blur(function(){ddlogin.register.passwordReg.checkPasswordReg()});g.keypress(function(j){ddlogin.register.passwordReg.checkCapslockOpen(j)});var d=jQuery("#txtRepeatPass");d.bind("focus",function(){ddlogin.register.rePasswordReg.checkRePasswordRegFocus()});d.blur(function(){ddlogin.register.rePasswordReg.checkRePasswordReg()});var c=jQuery("#txt_mobile");c.bind("focus",function(){ddlogin.register.mobileReg.checkMobileRegFocus()});c.blur(function(){ddlogin.register.mobileReg.checkMobileReg()});jQuery("#vcodeImgWrap, #vcodeImgBtn").click(function(){ddlogin.action.regShowVcodeFun("imgVcode")});var h=jQuery("#txtVerifyCode");h.bind("focus",function(j){ddlogin.register.vcodeReg.checkVcodeRegFocus(j)});h.blur(function(j){ddlogin.register.vcodeReg.checkVcodeReg(j)});h.keyup(function(j){ddlogin.register.vcodeReg.checkVcodeReg(j)});jQuery("#sendMobileCode").bind("click",function(){ddlogin.register.mobileCodeBtn.sendMobileCodeFun()});var f=jQuery("#J_MobileCode");f.bind("focus",function(){ddlogin.register.mobileCodeReg.checkMobileCodeRegFocus()});f.blur(function(){ddlogin.register.mobileCodeReg.checkMobileCodeReg()});jQuery("#chb_agreement").bind("click",function(){ddlogin.register.agreementReg.checkAgreementReg()});jQuery("#submit_register").bind("click",function(){ddlogin.register.tool.submitBtnAvailability("disable");ddlogin.register.check_register()})},register:{usernameIsOk:false,preUsernameIsEmail:false,nowUsernameIsEmail:false,passwordIsOk:false,rePasswordIsOk:false,mobileIsOk:false,vcodeIsOk:false,mobileCodeIsOk:false,agreementIsOk:true,isUpdateEmail:false,isUpdatePhone:false,oldUsername:"",oldMobile:"",getMoblieCodeInterval:120,miao:0,vcodeGenerateTiem:"",vcodeOvertimeInterval:10*60*1000,initGloabParam:function(){ddlogin.register.preUsernameIsEmail=false;ddlogin.register.nowUsernameIsEmail=false;ddlogin.register.isUpdateEmail=false;ddlogin.register.isUpdatePhone=false;ddlogin.register.oldUsername="";ddlogin.register.oldMobile="";ddlogin.register.usernameIsOk=false;ddlogin.register.passwordIsOk=false;ddlogin.register.rePasswordIsOk=false;ddlogin.register.mobileIsOk=false;ddlogin.register.vcodeIsOk=false;ddlogin.register.mobileCodeIsOk=false;ddlogin.register.agreementIsOk=true;clearTimeout(ddlogin.regMoblieCodetimeoutrun);clearTimeout(ddlogin.regSucctimeoutrun)},getCheatProof:function(){jQuery.ajax({url:ddlogin.register_cheat_proof,cache:true,jsonp:"jsoncallback",dataType:"jsonp",success:function(b){var a=b.returnval;if(a){$cheatProofDiv=jQuery("#J_registerCheatProof");if(a.cheatProof_display==="block"&&a.cheatProof){$cheatProofDiv.css({"display":"block"});if(a.cheatProof.errorCode==="0"){$cheatProofDiv.html(a.cheatProof.res)}else{$cheatProofDiv.html(ddlogin.registerCheatProof)}}return true}else{return false}}})},tool:{switchInputStyle:function(d,b,a,c){if(d=="normal"){jQuery("#"+b).removeClass("error");jQuery("#"+a).hide();jQuery("#"+c).removeClass("wrong").html("").css({"display":"block"})}else{if(d=="ok"){jQuery("#"+b).removeClass("error");jQuery("#"+a).removeClass("icon_wrong").addClass("icon_yes").css({"display":"inline-block"});jQuery("#"+c).removeClass("wrong").css({"display":"block"})}else{if(d=="error"){jQuery("#"+b).addClass("error");jQuery("#"+a).removeClass("icon_yes").addClass("icon_wrong").css({"display":"inline-block"});jQuery("#"+c).addClass("wrong").css({"display":"block"})}}}},switchVcodeArea:function(a){if(a==="vcode"){if(jQuery(".j-phoneVcode").is(":visible")){jQuery(".j-phoneVcode").hide();ddlogin.action.regShowVcodeFun("imgVcode");jQuery(".j-vcode").fadeIn(800);jQuery("#J_MobileCode").val("");ddlogin.register.mobileCodeIsOk=false;ddlogin.register.tool.switchInputStyle("normal","J_MobileCode","chk_mobilecodeok","mobilecodeerrormassage");clearTimeout(ddlogin.regMoblieCodetimeoutrun);jQuery("#sendMobileCode").show();jQuery("#J_countDownTip").hide()}else{ddlogin.action.regShowVcodeFun("imgVcode")}}else{if(a==="phoneVcode"){if(jQuery(".j-vcode").is(":visible")){jQuery(".j-vcode").hide();jQuery(".j-phoneVcode").fadeIn(800);ddlogin.register.tool.switchInputStyle("normal","txtVerifyCode","chk_vcodeok","vcodeerrormassage")}}}},hideMobile:function(){ddlogin.register.mobileIsOk=false;jQuery("#J_mobileV").hide();jQuery("#txt_mobile").val("");ddlogin.register.tool.switchInputStyle("normal","txt_mobile","chk_mobileok","mobileerrormassage")},showMobileAndUpdateVcode:function(){if(ddlogin.register.nowUsernameIsEmail&&ddlogin.register.preUsernameIsEmail!=ddlogin.register.nowUsernameIsEmail){jQuery("#J_mobileV").show()}else{if(!ddlogin.register.nowUsernameIsEmail&&ddlogin.register.preUsernameIsEmail!=ddlogin.register.nowUsernameIsEmail){ddlogin.register.tool.hideMobile()}}var a=jQuery.trim(jQuery("#txtVerifyCode").val());if(a!=""&&ddlogin.register.isUpdateEmail){if(!ddlogin.register.nowUsernameIsEmail||ddlogin.register.nowUsernameIsEmail!=ddlogin.register.preUsernameIsEmail){ddlogin.register.tool.switchVcodeArea("vcode")}}else{if(a!=""&&ddlogin.register.isUpdatePhone){ddlogin.register.tool.switchVcodeArea("vcode")}}ddlogin.register.isUpdateEmail=false;ddlogin.register.isUpdatePhone=false;ddlogin.register.preUsernameIsEmail=ddlogin.register.nowUsernameIsEmail;return true},isFunc:function(a){return typeof a=="function"},submitBtnAvailability:function(a){if(a=="disable"){jQuery("#J_submitRegisterUnclick").show();jQuery("#submit_register").hide()}else{jQuery("#J_submitRegisterUnclick").hide();jQuery("#submit_register").show()}}},userNameReg:{checkUsernameRegFocus:function(){ddlogin.register.tool.switchInputStyle("normal","txtEmail","chk_emailok","Emailerrormassage");jQuery("#Emailerrormassage").html(ddlogin.lang_zh["2101"])},checkUsernameReg:function(){ddlogin.register.usernameIsOk=false;ddlogin.register.nowUsernameIsEmail=false;var a=false;var b=jQuery.trim(jQuery("#txtEmail").val());if(ddlogin.register.oldUsername!=b){ddlogin.register.isUpdateEmail=true;ddlogin.register.oldUsername=b}ddlogin.register.tool.switchInputStyle("normal","txtEmail","chk_emailok","Emailerrormassage");if(b==""){ddlogin.register.tool.showMobileAndUpdateVcode();return false}if(!/^\d+$/.test(b)){if(b.length>40||!ddlogin.reg.emailReg.test(b)){ddlogin.register.tool.switchInputStyle("error","txtEmail","chk_emailok","Emailerrormassage");jQuery("#Emailerrormassage").html(ddlogin.lang_zh["2103"]);ddlogin.register.tool.showMobileAndUpdateVcode();return false}if(/[ ]/.test(b)){ddlogin.register.tool.switchInputStyle("error","txtEmail","chk_emailok","Emailerrormassage");jQuery("#Emailerrormassage").html(ddlogin.lang_zh["2103"]);ddlogin.register.tool.showMobileAndUpdateVcode();return false}jQuery.ajax({url:ddlogin.check_email_url,data:"email="+b,cache:false,async:false,jsonp:"jsoncallback",dataType:"jsonp",success:function(c){if(c.returnval){ddlogin.register.tool.switchInputStyle("error","txtEmail","chk_emailok","Emailerrormassage");jQuery("#Emailerrormassage").html(ddlogin.lang_zh["2104"].replace("{#Email#}",b));jQuery("#txtEmail").attr("errordata","1");ddlogin.register.tool.showMobileAndUpdateVcode();return false}else{ddlogin.register.tool.switchInputStyle("ok","txtEmail","chk_emailok","Emailerrormassage");jQuery("#Emailerrormassage").html("");jQuery("#txtEmail").attr("errordata","0");ddlogin.register.usernameIsOk=true;ddlogin.register.nowUsernameIsEmail=true;ddlogin.register.tool.showMobileAndUpdateVcode();return true}}})}else{if(!ddlogin.reg.mobileReg.test(b)){ddlogin.register.tool.switchInputStyle("error","txtEmail","chk_emailok","Emailerrormassage");jQuery("#Emailerrormassage").html(ddlogin.lang_zh["2103"]);jQuery("#txtEmail").attr("errordata","1");ddlogin.register.tool.showMobileAndUpdateVcode();return false}jQuery.ajax({url:ddlogin.check_mobile_url,cache:false,async:false,data:"mobile="+b,jsonp:"jsoncallback",dataType:"jsonp",success:function(c){if(c.returnval){ddlogin.register.tool.switchInputStyle("error","txtEmail","chk_emailok","Emailerrormassage");jQuery("#Emailerrormassage").html(ddlogin.lang_zh["2105"].replace("{#phone#}",b));jQuery("#txtEmail").attr("errordata","1");ddlogin.register.tool.showMobileAndUpdateVcode();return false}else{ddlogin.register.tool.switchInputStyle("ok","txtEmail","chk_emailok","Emailerrormassage");jQuery("#Emailerrormassage").html("");jQuery("#txtEmail").attr("errordata","0");ddlogin.register.usernameIsOk=true;ddlogin.register.tool.showMobileAndUpdateVcode();return true}}})}}},passwordReg:{checkPasswordRegFocus:function(){ddlogin.register.tool.switchInputStyle("normal","txtRegPass","chk_passwordok","passerrormassage");jQuery("#passerrormassage").html(ddlogin.lang_zh["2111"]);jQuery("#J_tipUpperCaseBox").hide();jQuery("#spnPwdStrongTips").hide();jQuery("#txtRegPass").attr("errordata","0")},checkPasswordRegInput:function(){if(jQuery("#J_tipUpperCaseBox").is(":hidden")){ddlogin.register.tool.switchInputStyle("normal","txtRegPass","chk_passwordok","passerrormassage");jQuery("#passerrormassage").hide();jQuery("#spnPwdStrongTips").hide();var a=jQuery("#txtRegPass").val();if(a.length==0){jQuery("#passerrormassage").html(ddlogin.lang_zh["2111"]);return false}if(a.length<6){jQuery("#spnPwdStrongTips").show();jQuery(".j_pwdStrong").hide();jQuery("#spnPwdStrong1").css({"display":"block"});return false}if(a.length>20){ddlogin.register.tool.switchInputStyle("error","txtRegPass","chk_passwordok","passerrormassage");jQuery("#passerrormassage").html(ddlogin.lang_zh["2113"]).show();return false}var b=ddlogin.register.passwordReg.checkStrong();if(b==0){return false}else{if(b==1){jQuery(".j_pwdStrong").hide();jQuery("#spnPwdStrong1").css({"display":"block"})}else{if(b==2){jQuery(".j_pwdStrong").hide();jQuery("#spnPwdStrong2").css({"display":"block"})}else{if(b>=3){jQuery(".j_pwdStrong").hide();jQuery("#spnPwdStrong3").css({"display":"block"})}}}}jQuery("#spnPwdStrongTips").show();jQuery("#chk_passwordok").removeClass("icon_wrong").addClass("icon_yes").css({"display":"inline-block"});return true}},checkPasswordReg:function(){ddlogin.register.tool.switchInputStyle("normal","txtRegPass","chk_passwordok","passerrormassage");jQuery("#spnPwdStrongTips").hide();jQuery("#J_tipUpperCaseBox").hide();jQuery("#passerrormassage").show();ddlogin.register.passwordIsOk=false;ddlogin.reg_chk_pass_bool=false;var a=jQuery("#txtRegPass").val();if(a==""){return false}if(a.length<6||a.length>20){ddlogin.register.tool.switchInputStyle("error","txtRegPass","chk_passwordok","passerrormassage");jQuery("#passerrormassage").html(ddlogin.lang_zh["2113"]);jQuery("#txtRegPass").attr("errordata","1");return false}if(!/^\S{1,20}$/.test(a)){ddlogin.register.tool.switchInputStyle("error","txtRegPass","chk_passwordok","passerrormassage");jQuery("#passerrormassage").html(ddlogin.lang_zh["2115"]);jQuery("#txtRegPass").attr("errordata","1");return false}for(var b=0;b<a.length;b++){if(a.charCodeAt(b)>127){ddlogin.register.tool.switchInputStyle("error","txtRegPass","chk_passwordok","passerrormassage");jQuery("#passerrormassage").html(ddlogin.lang_zh["2116"]);jQuery("#txtRegPass").attr("errordata","1");return false}}if(!ddlogin.register.passwordReg.checkPasswordRegInput()){return false}ddlogin.register.passwordIsOk=true;ddlogin.register.rePasswordReg.checkRePasswordReg();return true},checkCapslockOpen:function(b){var b=window.event||b;var c=b.keyCode||b.which;var a=b.shiftKey||(c==16)||false;if(((c>=65&&c<=90)&&!a)||((c>=97&&c<=122)&&a)){jQuery("#spnPwdStrongTips").hide();jQuery("#passerrormassage").hide();jQuery("#J_tipUpperCaseBox").show()}else{if(c>=97&&c<=122&&!a){jQuery("#J_tipUpperCaseBox").hide()}else{if(c==27){jQuery("#J_tipUpperCaseBox").hide()}else{jQuery("#J_tipUpperCaseBox").hide()}}}},checkStrong:function(){var c=jQuery("#txtRegPass").val();if(c.length<1){return 0}var a=0;for(i=0;i<c.length;i++){a|=ddlogin.register.passwordReg.evaluate(c.charCodeAt(i))}var b=ddlogin.register.passwordReg.bitTotal(a);return b},evaluate:function(a){if(a>=48&&a<=57){return 1}if(a>=65&&a<=90){return 2}if(a>=97&&a<=122){return 4}if(a<=127){return 8}},bitTotal:function(a){var b=0;for(i=0;i<4;i++){if(a&1){b++}a>>>=1}return b}},rePasswordReg:{checkRePasswordRegFocus:function(){ddlogin.register.tool.switchInputStyle("normal","txtRepeatPass","chk_repassok","repasserrormassage");jQuery("#repasserrormassage").html(ddlogin.lang_zh["2121"]);jQuery("#txtRepeatPass").attr("errordata","0")},checkRePasswordReg:function(){ddlogin.register.tool.switchInputStyle("normal","txtRepeatPass","chk_repassok","repasserrormassage");ddlogin.register.rePasswordIsOk=false;var a=jQuery("#txtRegPass").val();var b=jQuery("#txtRepeatPass").val();if(b==""){return false}if(b!=a){ddlogin.register.tool.switchInputStyle("error","txtRepeatPass","chk_repassok","repasserrormassage");jQuery("#repasserrormassage").html(ddlogin.lang_zh["2123"]);jQuery("#txtRepeatPass").attr("errordata","1");return false}jQuery("#chk_repassok").removeClass("icon_wrong").addClass("icon_yes").css({"display":"inline-block"});ddlogin.register.rePasswordIsOk=true;return true}},mobileReg:{checkMobileRegFocus:function(){ddlogin.register.tool.switchInputStyle("normal","txt_mobile","chk_mobileok","mobileerrormassage");jQuery("#mobileerrormassage").html(ddlogin.lang_zh["2131"])},checkMobileReg:function(){ddlogin.register.tool.switchInputStyle("normal","txt_mobile","chk_mobileok","mobileerrormassage");ddlogin.register.mobileIsOk=false;var a=jQuery.trim(jQuery("#txt_mobile").val());if(ddlogin.register.oldMobile!=a){ddlogin.register.isUpdatePhone=true;ddlogin.register.oldMobile=a}if(a==""){ddlogin.register.tool.showMobileAndUpdateVcode();return false}if(!ddlogin.reg.mobileReg.test(a)){ddlogin.register.tool.switchInputStyle("error","txt_mobile","chk_mobileok","mobileerrormassage");jQuery("#mobileerrormassage").html(ddlogin.lang_zh["2133"]);ddlogin.register.tool.showMobileAndUpdateVcode();return false}jQuery.ajax({url:ddlogin.check_mobile_url,cache:false,async:false,data:"mobile="+a,jsonp:"jsoncallback",dataType:"jsonp",success:function(b){if(b.returnval){ddlogin.register.tool.switchInputStyle("error","txt_mobile","chk_mobileok","mobileerrormassage");jQuery("#mobileerrormassage").html(ddlogin.lang_zh["2105"].replace("{#phone#}",a));jQuery("#txt_mobile").attr("errordata","1");ddlogin.register.tool.showMobileAndUpdateVcode();return false}else{ddlogin.register.tool.switchInputStyle("ok","txt_mobile","chk_mobileok","mobileerrormassage");jQuery("#mobileerrormassage").html("");jQuery("#txt_mobile").attr("errordata","0");ddlogin.register.mobileIsOk=true;ddlogin.register.tool.showMobileAndUpdateVcode();return true}}})}},vcodeReg:{checkVcodeRegFocus:function(){ddlogin.register.tool.switchInputStyle("normal","txtVerifyCode","chk_vcodeok","vcodeerrormassage");jQuery("#vcodeerrormassage").html(ddlogin.lang_zh["2161"])},checkVcodeReg:function(c){if(jQuery(".j-vcode").is(":visible")){ddlogin.register.vcodeIsOk=false;ddlogin.register.tool.switchInputStyle("normal","txtVerifyCode","chk_vcodeok","vcodeerrormassage");var b=jQuery.trim(jQuery("#txtVerifyCode").val());var a=b.length;if(ddlogin.reg.vcodeReg.test(b)){if(a==4){if(!ddlogin.register.vcodeReg.checkVcodeRegOvertime()){ddlogin.register.tool.switchInputStyle("error","txtVerifyCode","chk_vcodeok","vcodeerrormassage");jQuery("#vcodeerrormassage").html(ddlogin.lang_zh["2164"]);return false}ddlogin.register.vcodeReg.checkVcodeRegIsOk(b)}}else{ddlogin.register.tool.switchInputStyle("error","txtVerifyCode","chk_vcodeok","vcodeerrormassage");jQuery("#vcodeerrormassage").html(ddlogin.lang_zh["2163"]);return false}}},checkVcodeRegIsOk:function(a){jQuery.ajax({url:ddlogin.check_reg_vcode_url,data:"vcode="+escape(a)+"&type=0",jsonp:"jsoncallback",dataType:"jsonp",success:function(b){if(b.returnval){ddlogin.register.tool.switchInputStyle("ok","txtVerifyCode","chk_vcodeok","vcodeerrormassage");ddlogin.register.vcodeIsOk=true;if(jQuery("#J_mobileV").is(":visible")){if(!ddlogin.register.mobileIsOk){return false}}else{if(!ddlogin.register.usernameIsOk){return false}}ddlogin.register.mobileCodeBtn.sendMobileCodeFun();return true}else{ddlogin.register.tool.switchInputStyle("error","txtVerifyCode","chk_vcodeok","vcodeerrormassage");jQuery("#vcodeerrormassage").html(ddlogin.lang_zh["2163"]);return false}}})},checkVcodeRegOvertime:function(){var a=new Date().getTime();if((a-ddlogin.register.vcodeGenerateTiem)>ddlogin.register.vcodeOvertimeInterval){ddlogin.action.regShowVcodeFun("imgVcode");return false}else{return true}}},mobileCodeBtn:{checkEnableGetMobileCode:function(){jQuery("#mobilecodeerrormassage").removeClass("wrong").html("");if(jQuery("#J_mobileV").is(":visible")){if(jQuery.trim(jQuery("#txt_mobile").val())==""){ddlogin.register.tool.switchInputStyle("error","txt_mobile","chk_mobileok","mobileerrormassage");jQuery("#mobileerrormassage").html(ddlogin.lang_zh["2132"]);return false}if(!ddlogin.register.mobileReg.checkMobileReg()){return false}}else{if(jQuery.trim(jQuery("#txtEmail").val())==""){ddlogin.register.tool.switchInputStyle("error","txtEmail","chk_emailok","Emailerrormassage");jQuery("#Emailerrormassage").html(ddlogin.lang_zh["2102"]);return false}if(!ddlogin.register.userNameReg.checkUsernameReg()){return false}}return true},sendMobileCodeFun:function(){var b="";var a=jQuery("#txtVerifyCode").val();if(jQuery("#J_mobileV").is(":visible")){b=jQuery.trim(jQuery("#txt_mobile").val())}else{b=jQuery.trim(jQuery("#txtEmail").val())}var d=0;var c=5;var e=false;jQuery.ajax({url:ddlogin.mobileregister_getvcode_url_new,data:"custid="+d+"&vcode="+a+"&type=0&mobile_phone="+b+"&verify_type="+c,cache:false,jsonp:"jsoncallback",dataType:"jsonp",success:function(g){var f=g.returnval;if(f=="-10"||f=="-11"||f=="-12"){ddlogin.register.tool.switchVcodeArea("vcode");ddlogin.register.tool.switchInputStyle("error","txtVerifyCode","chk_vcodeok","vcodeerrormassage");jQuery("#vcodeerrormassage").html(ddlogin.lang_zh["2164"]);return false}else{ddlogin.register.tool.switchVcodeArea("phoneVcode");jQuery("#mobilecodeerrormassage").css({"display":"block"});if(f=="0"){ddlogin.register.miao=ddlogin.register.getMoblieCodeInterval;changejishi();jQuery("#J_MobileCode").val("");jQuery("#J_MobileCode").focus();jQuery("#mobilecodeerrormassage").removeClass("wrong").html(ddlogin.lang_zh["2142"]);return true}else{if(f=="-2"){jQuery("#mobilecodeerrormassage").addClass("wrong").html(ddlogin.lang_zh["2143"]);jQuery("#sendMobileCode").hide();jQuery("#J_countDownTip").html(ddlogin.lang_zh["2146"]).show();return false}else{if(f=="-4"||f=="-5"||f=="-8"){jQuery("#mobilecodeerrormassage").addClass("wrong").html(ddlogin.lang_zh["2145"]);return false}else{if(f=="-7"){jQuery("#mobilecodeerrormassage").addClass("wrong").html(ddlogin.lang_zh["2149"]);return false}else{jQuery("#mobilecodeerrormassage").addClass("wrong").html(ddlogin.lang_zh["2144"]);return false}}}}}}})}},mobileCodeReg:{checkMobileCodeRegFocus:function(){ddlogin.register.tool.switchInputStyle("normal","J_MobileCode","chk_mobilecodeok","mobilecodeerrormassage");jQuery("#mobilecodeerrormassage").html(ddlogin.lang_zh["2141"])},checkMobileCodeReg:function(){ddlogin.register.tool.switchInputStyle("normal","J_MobileCode","chk_mobilecodeok","mobilecodeerrormassage");ddlogin.register.mobileCodeIsOk=false;var d=jQuery.trim(jQuery("#txt_mobile").val());var c=jQuery.trim(jQuery("#txtEmail").val());var f="";var a=jQuery.trim(jQuery("#J_MobileCode").val());if(a==""){return false}if(a.length!=6){ddlogin.register.tool.switchInputStyle("error","J_MobileCode","chk_mobilecodeok","mobilecodeerrormassage");jQuery("#mobilecodeerrormassage").html(ddlogin.lang_zh["2148"]);return false}if(jQuery("#J_mobileV").is(":visible")){f=d}else{if(ddlogin.register.usernameIsOk){f=c}}var b=5;var e=0;jQuery.ajax({url:ddlogin.check_mobilecode_url,cache:false,data:"mobile_phone="+f+"&verify_type="+b+"&sms_vcode="+a+"&type="+e,jsonp:"jsoncallback",dataType:"jsonp",success:function(g){if(g.returnval){ddlogin.register.tool.switchInputStyle("ok","J_MobileCode","chk_mobilecodeok","mobilecodeerrormassage");ddlogin.register.mobileCodeIsOk=true;return true}else{ddlogin.register.tool.switchInputStyle("error","J_MobileCode","chk_mobilecodeok","mobilecodeerrormassage");jQuery("#mobilecodeerrormassage").html(ddlogin.lang_zh["2148"]);return false}}})}},agreementReg:{checkAgreementReg:function(){if(jQuery("#chb_agreement").attr("checked")||"checked"==jQuery("#chb_agreement").attr("checked")){jQuery("#J_tipAgreement").html("");ddlogin.register.agreementIsOk=true;return true}else{jQuery("#J_tipAgreement").html(ddlogin.lang_zh["2151"]);ddlogin.register.agreementIsOk=false;return false}}},check_register:function(){var d=jQuery.trim(jQuery("#txtEmail").val());var c=jQuery.trim(jQuery("#txtRegPass").val());var a=jQuery.trim(jQuery("#txtRepeatPass").val());var b=jQuery.trim(jQuery("#txt_mobile").val());var g=jQuery.trim(jQuery("#txtVerifyCode").val());var e=jQuery.trim(jQuery("#J_MobileCode").val());var f="";if(d==""||c==""||a==""||g==""||(jQuery("#J_mobileV").is(":visible")&&b=="")||(jQuery(".j-phoneVcode").is(":visible")&&e=="")){if(d==""){ddlogin.register.tool.switchInputStyle("error","txtEmail","chk_emailok","Emailerrormassage");jQuery("#Emailerrormassage").html(ddlogin.lang_zh["2102"])}if(c==""){ddlogin.register.tool.switchInputStyle("error","txtRegPass","chk_passwordok","passerrormassage");jQuery("#passerrormassage").html(ddlogin.lang_zh["2112"]);jQuery("#J_tipUpperCaseBox").hide();jQuery("#spnPwdStrongTips").hide()}if(a==""){ddlogin.register.tool.switchInputStyle("error","txtRepeatPass","chk_repassok","repasserrormassage");jQuery("#repasserrormassage").html(ddlogin.lang_zh["2122"])}if(jQuery("#J_mobileV").is(":visible")&&b==""){ddlogin.register.tool.switchInputStyle("error","txt_mobile","chk_mobileok","mobileerrormassage");jQuery("#mobileerrormassage").html(ddlogin.lang_zh["2132"])}if(g==""){ddlogin.register.tool.switchInputStyle("error","txtVerifyCode","chk_vcodeok","vcodeerrormassage");jQuery("#vcodeerrormassage").html(ddlogin.lang_zh["2162"])}if(e==""){ddlogin.register.tool.switchInputStyle("error","J_MobileCode","chk_mobilecodeok","mobilecodeerrormassage");jQuery("#mobilecodeerrormassage").html(ddlogin.lang_zh["2141"])}ddlogin.register.tool.submitBtnAvailability("enable");return false}if(!ddlogin.register.vcodeIsOk){ddlogin.register.tool.switchInputStyle("error","txtVerifyCode","chk_vcodeok","vcodeerrormassage");jQuery("#vcodeerrormassage").html(ddlogin.lang_zh["2163"]);ddlogin.register.tool.submitBtnAvailability("enable");return false}if(ddlogin.register.usernameIsOk&&ddlogin.register.passwordIsOk&&ddlogin.register.rePasswordIsOk&&ddlogin.register.vcodeIsOk&&ddlogin.register.mobileCodeIsOk&&ddlogin.register.agreementIsOk&&((!jQuery("#J_mobileV").is(":visible"))||ddlogin.register.mobileIsOk)){ddlogin.register.register_submit();return true}else{ddlogin.register.tool.submitBtnAvailability("enable")}},register_submit:function(){var c="";var b=jQuery.trim(jQuery("#txt_mobile").val());var a=jQuery.trim(jQuery("#J_MobileCode").val());var d=jQuery.trim(jQuery("#txtEmail").val());if(ddlogin.register.nowUsernameIsEmail&&ddlogin.register.usernameIsOk){c="&mobile="+b}jQuery.ajax({url:ddlogin.login_register_user_url,cache:false,data:"email="+d+"&password="+encodeURIComponent(jQuery("#txtRegPass").val())+c+"&mobilevcode="+a,jsonp:"jsoncallback",dataType:"jsonp",success:function(e){ddlogin.register.tool.submitBtnAvailability("enable");var f=e.returnval;if(f=="1"){ddlogin.register.tool.switchInputStyle("error","txtEmail","chk_emailok","Emailerrormassage");jQuery("#Emailerrormassage").html(ddlogin.lang_zh["2104"].replace("{#Email#}",d));jQuery("#txtEmail").attr("errordata","1");ddlogin.register.usernameIsOk=false}else{if(f=="8"){ddlogin.register.tool.switchInputStyle("error","txtEmail","chk_emailok","Emailerrormassage");jQuery("#Emailerrormassage").html(ddlogin.lang_zh["2105"].replace("{#phone#}",d));jQuery("#txtEmail").attr("errordata","1");ddlogin.register.usernameIsOk=false;ddlogin.register.tool.showMobileAndUpdateVcode()}else{if(f=="2"||f=="7"){ddlogin.register.tool.switchInputStyle("error","txtEmail","chk_emailok","Emailerrormassage");jQuery("#txtEmail").attr("errordata","1");jQuery("#Emailerrormassage").html(ddlogin.lang_zh["2171"])}else{if(f=="4"||f=="5"){ddlogin.register.tool.switchInputStyle("error","J_MobileCode","chk_mobilecodeok","mobilecodeerrormassage");jQuery("#mobilecodeerrormassage").html(ddlogin.lang_zh["2148"])}else{if(f=="6"){ddlogin.register.show_register_success("phone","",e.mobile)}else{if(f=="3"){ddlogin.register.show_register_success("email",e.email,b)}}}}}}},error:function(){ddlogin.register.tool.submitBtnAvailability("enable")}})},show_register_success:function(c,b,a){if(c=="email"&&b.length>30){b=b.substring(0,29)+"<br/>"+b.substring(29,b.length)}jQuery("#main_wind").html(ddlogin.windowregisteremailsuccesshtml.replace("{#Email#}",b).replace("{#Phone#}",a));if(c=="email"){jQuery("#emailWrap").show()}ddlogin.returnShopTime=ddlogin.returnShopDuration;ddlogin.register.returnShop();jQuery("#register_succes").click(function(){ddlogin.action.closeloginwin();clearTimeout(ddlogin.regSucctimeoutrun);var d="http://"+login_checkscript_domin+"/CheckLogin.php?objid="+public_objid+"&time="+new Date().getTime()+"&posturl="+public_posturl;jQuery.getScript(d);initHeaderOperate()})},returnShop:function(){ddlogin.returnShopTime--;var a,c;a=parseInt(ddlogin.returnShopTime/60);c=ddlogin.returnShopTime-(a*60);var d="";if(a>0){d=a+"\u5206"}if(ddlogin.returnShopTime>0){jQuery("#J_returnShopTip").html(d+c).show();clearTimeout(ddlogin.regSucctimeoutrun);ddlogin.regSucctimeoutrun=setTimeout(ddlogin.register.returnShop,1000)}else{ddlogin.action.closeloginwin();var b="http://"+login_checkscript_domin+"/CheckLogin.php?objid="+public_objid+"&time="+new Date().getTime()+"&posturl="+public_posturl;jQuery.getScript(b);initHeaderOperate()}}},action:{closeloginwin:function(){jQuery("#login_background").hide();jQuery("#LoginWindow").hide()},showwindow:function(){jQuery("#login_background").show()},checklogin:function(a){jQuery.getScript(a)},show_vcode:function(a){jQuery("#imgVcode").attr("src",ddlogin.login_vcode_url+"?t="+new Date().getTime());jQuery("#chk_vcodeok").css("display","none");jQuery("#m_picture_vcodeok").css("display","none")},show_vcode_reg:function(a){jQuery("#imgVcode").attr("src",ddlogin.login_reg_vcode_url+"?t="+new Date().getTime());jQuery("#chk_vcodeok").hide()},regShowVcodeFun:function(a){ddlogin.register.vcodeIsOk=false;ddlogin.register.vcodeGenerateTiem=new Date().getTime();jQuery("#"+a).attr("src",ddlogin.login_reg_vcode_url+"?t="+ddlogin.register.vcodeGenerateTiem);jQuery("#txtVerifyCode").val("");ddlogin.register.tool.switchInputStyle("normal","txtVerifyCode","chk_vcodeok","vcodeerrormassage")}},callback:{callbackid:null,callbackfunc:null,callbackparameters:null},getCookie:function(b,c){var e=document.cookie.split(";");var a;var d;if(c=="dangdang"||c=="ddoy"){if(c=="dangdang"){d="dangdang.com="}if(c=="ddoy"){d="ddoy="}var f="";for(i=0;i<e.length;i++){if(e[i].indexOf(d)>-1){f=e[i].split("&");for(x=0;x<f.length;x++){a=f[x].split("=");if(jQuery.trim(a[0])==b){return unescape(a[1])}}}}}else{for(i=0;i<e.length;i++){if(e[i].indexOf("dangdang.com=")<0){a=e[i].split("=");if(jQuery.trim(a[0])==b){return unescape(a[1])}}}}return""},c_obj:null,c_gotourl:null};var ddvcode={new_vcode_url:"http://"+show_vcode_domin+"/p/tmp_proxy.php",check_vcode_url:"http://"+show_vcode_domin+"/p/vcode_checker_new.php",show_vcode:function(a){if(document.getElementById(a)){document.getElementById(a).src=ddvcode.new_vcode_url+"?t="+new Date().getTime()}}};function callbackobj(){this.callbackfunction=null;this.callbacksetting=null;this.callbackparameters=null;this.callbackid=null}function showMsgBox(a,d,c){var e=arguments.length;if(e>3){ddlogin.callback.callbackfunc=arguments[3];ddlogin.callback.callbackid=arguments[4];ddlogin.callback.callbackparameters=arguments[5]}public_objid=a;if(c!=""){public_posturl=c+"?par="+d}else{public_posturl=""}if(e>6){if(arguments[6]=="shopping"){ddlogin.openchangepass=1}}var b=ddlogin.login_inintData_url+"?objid="+public_objid+"&time="+new Date().getTime()+"&posturl="+public_posturl+"&returnurl="+location.href;ddlogin.create_Jquert(b,function(){var f=true},"login_load_script")}function showMsgBox_comm(a,d,c){var e=arguments.length;if(e>3){ddlogin.callback.callbackfunc=arguments[3];ddlogin.callback.callbackid=arguments[4];ddlogin.callback.callbackparameters=arguments[5]}public_objid=a;if(c!=""){public_posturl=c+"?par="+d}else{public_posturl=""}var b=ddlogin.login_inintData_url+"?background=1&objid="+public_objid+"&time="+new Date().getTime()+"&posturl="+public_posturl+"&returnurl="+location.href;ddlogin.create_Jquert(b,function(){var f=true},"login_load_script")}function ShowLoginWindow(a){if(a=="showvcode"){ddlogin.login_show_vcode=true}ddlogin.login_win_back_backcollor="#FFF";ddlogin.login_win_back_alpha=0;ddlogin.init(0)}function ShowLoginWindow_background(a){if(a=="showvcode"){ddlogin.login_show_vcode=true}ddlogin.login_win_back_backcollor="#000";ddlogin.login_win_back_alpha=60;ddlogin.init(1)}function Completeifrem(a,b){ddlogin.c_obj=a;ddlogin.c_gotourl=b;ddlogin.load_jquery(function(){Completeifrem_ok(ddlogin.c_obj,ddlogin.c_gotourl)})}function Completeifrem_ok(b,e){if(jQuery("#LoginWindow")[0]){jQuery("#LoginWindow").html(ifremHTML)}else{jQuery(document.body).append(ddlogin.window_login_div_html);jQuery("#LoginWindow").html(ifremHTML)}var a=parseInt((jQuery(window).height()-jQuery("#LoginWindow").height())/2)+jQuery(document).scrollTop();var d=parseInt((jQuery(window).width()-jQuery("#LoginWindow").width())/2);jQuery("#LoginWindow").css({top:a+"px",left:d+"px"});jQuery("#LoginWindow").show();if(e==""){HideFramInLoginPage()}else{if(jQuery("#MsgBoxFrame")[0]){jQuery("#MsgBoxFrame").attr("src",e)}var c=ddlogin.callback;if(c){if("function"==typeof c.callbackfunc){c.callbackfunc(c.callbackid,c.callbackparameters)}}}}function sign_submit(){var a="http://"+login_checkscript_domin+"/signinscript.php?logintype="+jQuery("#user_login_type").val()+"&username="+jQuery("#txtUsername").val()+"&password="+encodeURIComponent(jQuery("#txtPassword").val())+"&verifycode="+escape(jQuery("#txtVerifyCode").val())+"&auth_human_id="+ddlogin.auth_human_id+"&ispersist="+jQuery("#ispersist").val()+"&objid="+public_objid+"&posturl="+public_posturl+"&t="+new Date().getTime()+"&shopping="+ddlogin.openchangepass;jQuery.getScript(a)}function changejishi(){ddlogin.register.miao--;var a,b;a=parseInt(ddlogin.register.miao/60);b=ddlogin.register.miao-(a*60);var c="";if(a>0){c=a+"\u5206"}if(ddlogin.register.miao>0){jQuery("#J_countDownTip").html(c+b+"秒后重新获取").show();jQuery("#sendMobileCode").hide();clearTimeout(ddlogin.regMoblieCodetimeoutrun);ddlogin.regMoblieCodetimeoutrun=setTimeout(changejishi,1000)}else{jQuery("#sendMobileCode").show();jQuery("#J_countDownTip").hide();jQuery("#mobilecodeerrormassage").html("")}}function echo_error_message(b){switch(b){case 1:ddlogin.login.tool.switchInputStyle("error","username_div","user_mindstyle");jQuery("#liDivErrorMessage").show().html(ddlogin.lang_zh["1102"]);
jQuery("#txtPassword").val("");jQuery("#winlogin_vcode").show();ddlogin.login_show_vcode=true;ddlogin.action.loginShowVcodeFun("imgVcode");ddlogin.login.userType.hideUsertypeAndSwitchBtn();jQuery("#txtVerifyCode").blur();break;case 2:ddlogin.login.tool.switchInputStyle("error","username_div","user_mindstyle");jQuery("#liDivErrorMessage").show().html(ddlogin.lang_zh["1102"]);jQuery("#txtUsername").attr("errordata","2");ddlogin.login.tool.switchInputStyle("error","password_div","pass_mindstyle");jQuery("#txtPassword").val("");jQuery("#txtPassword").attr("errordata","1");ddlogin.login.userType.hideUsertypeAndSwitchBtn();jQuery("#selusertypemail").attr("checked",false);jQuery("#selusertypemobile").attr("checked",false);if(jQuery("#winlogin_vcode").is(":visible")){ddlogin.action.loginShowVcodeFun("imgVcode")}break;case 3:jQuery("#winlogin_vcode").show();ddlogin.login.tool.switchInputStyle("error","vcode_model","vcode_mindstyle");jQuery("#login_vcode_error").css("display","block");jQuery("#login_vcode_error").html(ddlogin.lang_zh["1304"]);jQuery("#codeReplacer").css("display","none");jQuery("#txtVerifyCode").attr("errordata","1");ddlogin.login_show_vcode=true;ddlogin.action.loginShowVcodeFun("imgVcode");break;case 4:ddlogin.login.tool.switchInputStyle("error","vcode_model","vcode_mindstyle");jQuery("#login_vcode_error").css("display","block").html(ddlogin.lang_zh["1303"]);jQuery("#codeCapslock").css("display","none");ddlogin.action.loginShowVcodeFun("imgVcode");break;case 5:jQuery("#liDivErrorMessage").show();if(ddlogin.reg.emailReg.test(userName)||ddlogin.reg.mobileReg.test(userName)){jQuery("#liDivErrorMessage").html(ddlogin.lang_zh["1103"])}else{jQuery("#liDivErrorMessage").html(ddlogin.lang_zh["1103"])}break;case 6:ddlogin.login.tool.switchInputStyle("error","vcode_model","vcode_mindstyle");jQuery("#login_vcode_error").css("display","block");jQuery("#login_vcode_error").html(ddlogin.lang_zh["1303"]);jQuery("#codeReplacer").css("display","none");jQuery("#txtVerifyCode").attr("errordata","2");break;case 7:jQuery("#login_password_error").show().html(ddlogin.lang_zh["1203"]);break;case 8:ddlogin.login.userType.hideUsertypeAndSwitchBtn();jQuery("#txtUsername").attr("errordata","0");ddlogin.login.tool.switchInputStyle("normal","username_div","user_mindstyle");jQuery("#liDivErrorMessage").show().html(ddlogin.lang_zh["1101"]);jQuery("#usernameCapslock").css("display","none");break;case 9:ddlogin.register.tool.switchInputStyle("normal","J_MobileCode","chk_mobilecodeok","mobilecodeerrormassage");jQuery("#mobilecodeerrormassage").addClass("wrong").html(ddlogin.lang_zh["2148"]);jQuery("#mobile_vcode").attr("errordata","1");break;case 10:jQuery("#reg_mobilevcode_div").css("display","");ddlogin.login_show_vcode=true;jQuery("#mobile_pictureverify_box").addClass("relative_box");jQuery("#m_picture_vcodeerrormassage").removeClass("overview").addClass("wrong");jQuery("#m_picture_vcodeerrormassage").html("\u4e3a\u4e86\u4f60\u7684\u8d26\u6237\u5b89\u5168,\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801");jQuery("#txt_picture_vcode").attr("errordata","1");jQuery("#txt_picture_vcode").removeClass("focus").addClass("input_error");jQuery("#m_picture_vcodeerrormassage").css("display","");jQuery("#m_picture_vcodeok").hide();ddlogin.action.show_vcode_reg("imgVcode");break;case 11:if(jQuery("#txtUsername").attr("errordata")!="3"){jQuery("#username_div").removeClass().addClass("username");jQuery("#liDivErrorMessage").hide();jQuery("#usernameCapslock").hide()}jQuery("#txtUsername").attr("errordata","0");break;case 12:ddlogin.login.tool.switchInputStyle("normal","password_div","pass_mindstyle");jQuery("#login_password_error").css("display","block").html(ddlogin.lang_zh["1201"]);jQuery("#passwordCapslock").css("display","none");break;case 13:jQuery("#password_div").removeClass().addClass("password");jQuery("#login_password_error").hide();jQuery("#passwordCapslock").hide();break;case 14:var a=jQuery("#txtVerifyCode").attr("errordata");ddlogin.login.tool.switchInputStyle("normal","vcode_model","vcode_mindstyle");jQuery("#login_vcode_error").css("display","block").html(ddlogin.lang_zh["1301"]);jQuery("#codeCapslock").css("display","none");if(a=="2"){ddlogin.action.loginShowVcodeFun("imgVcode")}jQuery("#login_vcode_error").attr("errordata","0");break;case 15:jQuery("#vcode_model").removeClass().addClass("code");jQuery("#login_vcode_error").css("display","none");jQuery("#codeCapslock").css("display","none");jQuery("#txtVerifyCode").attr("errordata","0");break;case 16:ddlogin.login.tool.switchInputStyle("error","vcode_model","vcode_mindstyle");jQuery("#login_vcode_error").css("display","block");jQuery("#login_vcode_error").html(ddlogin.lang_zh["1302"]);jQuery("#codeReplacer").css("display","block");jQuery("#txtVerifyCode").attr("errordata","1");break;case 17:window.open("https://"+login_checkscript_domin+"/RegisterOne.php");ddlogin.action.closeloginwin();break;case 18:ddlogin.register.tool.switchInputStyle("normal","J_MobileCode","chk_mobilecodeok","mobilecodeerrormassage");jQuery("#mobilecodeerrormassage").addClass("wrong").html(ddlogin.lang_zh["2145"]);jQuery("#mobile_vcode").attr("errordata","1");break;case 19:ddlogin.register.tool.switchInputStyle("error","txtEmail","chk_emailok","Emailerrormassage");jQuery("#txtEmail").attr("errordata","1");jQuery("#Emailerrormassage").html(ddlogin.lang_zh["2171"]);break;case 20:ddlogin.register.tool.switchInputStyle("error","txtVerifyCode","chk_vcodeok","vcodeerrormassage");jQuery("#txtVerifyCode").attr("errordata","1");jQuery("#chk_vcodeok").hide();jQuery("#vcodeerrormassage").html(ddlogin.lang_zh["2172"]);ddlogin.action.regShowVcodeFun("imgVcode");break;default:break}}function HideFramInLoginPage(){ddlogin.action.closeloginwin();var a=ddlogin.callback;if(a){if("function"==typeof a.callbackfunc){a.callbackfunc(a.callbackid,a.callbackparameters)}}}function hideMsgBox(){ddlogin.action.closeloginwin()}function BodyInit(){resizeMsgBox()}function resizeMsgBox(){var a=window.parent;var b=a.document.getElementById("MsgBoxFrame");var d=null;b.style.height=null;b.style.width=null;if(jQuery.browser.msie){d=window.frames["MsgBoxFrame"].document}else{for(i=0;i<window.frames.length;i++){try{if(window.frames[i].name=="MsgBoxFrame"){d=window.frames[i].document}}catch(c){}}}b.style.width=d.documentElement.scrollWidth+20+"px";if(d.body.scrollHeight==0){b.style.height=d.documentElement.scrollWidth+20+"px"}else{b.style.height=d.documentElement.scrollHeight+20+"px"}}function Create_jQuery_extend(){jQuery.fn.extend({textposition:function(e){var d=this[0];if(d&&(d.tagName=="TEXTAREA"||d.type.toLowerCase()=="text")){if(jQuery.browser.msie){var b;if(d.tagName=="TEXTAREA"){b=event.srcElement.createTextRange();b.moveToPoint(event.x,event.y)}else{b=document.selection.createRange()}if(e===undefined){var a=this.val();b.moveStart("character",-a.length);return b.text.length}else{if(typeof e==="number"){var c=this.textposition();c>e?(b.moveEnd("character",e-c)):(b.moveStart("character",e-c));b.select()}}}else{if(e===undefined){return d.selectionStart}else{if(typeof e==="number"){d.selectionEnd=e;d.selectionStart=e}}}}else{if(e===undefined){return undefined}}}})};